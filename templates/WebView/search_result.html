<html>
{%  load static from staticfiles %}
<head>
    <title>Product analysis result</title>
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js'></script>
    <script src="{% static 'app/js/Chart.min.js' %}"></script>
</head>
<body background="{% static 'app/img/background.jpg' %}">

<div align="center">
    <table>

        <tr>
            <td colspan="2" align="center">
                <a href="http://52.78.128.31/"><img src="{% static 'app/img/angelsweb_image.png' %}" width="550" height="180" border="0" /> </a></td>
        </tr>

        <tr>
            <td width="500">
                <table>
                    <tr>
                        <td width="500">
                            <p><img src="{{product.image_file.url}}" width="480" height="320"/></p></td></tr>
                    <tr>
                        <td width="500" align="left">
                            <a href="{{ product.description }}"><img src="{% static 'app/img/lookproductbanner.png' %}" width="200" height="40" border="0" /> </a></td></tr>
                </table>
            </td>
            <td width="450">
                <table>

                    <tr>
                        <td width="280">
                            <p> product number: {{ product.pk }}</p>
                            <p> Product Category: {{ product.title }}</p></td>
                        <td width="170">
                            <p><img src="{% static 'app/img/barexplain.png' %}" width="130" height="70"/></p></td>
                    </tr>

                    <tr>
                        <td colspan="2" width="450" align="center">
                            <input type="radio" id="barGraph" name="graph" checked="checked" onclick="showGraph('barGraph')"> All
                            <input type="radio" id="priceGraph" name="graph" onclick="showGraph('priceGraph')" > Price
                            <input type="radio" id="deliveryGraph" name="graph" onclick="showGraph('deliveryGraph');"> Delivery
                            <input type="radio" id="sizeGraph" name="graph" onclick="showGraph('sizeGraph')"> Size
                            <input type="radio" id="extraGraph" name="graph" onclick="showGraph('extraGraph')"> Extra
                        </td>
                    </tr>

                    <tr>
                        <td colspan="2" width="450"><canvas id="canvas" width="450" height="300"></canvas></td></tr>

                </table>
            </td>
        </tr>

    </table>
    <script type="text/javascript">
        var barChartData = {
            labels : ["Price","Delivery","Size","Extra"],
            datasets : [
                {
                    fillColor : "rgba(0,0,255,0.85)",
                    strokeColor : "rgba(0,0,255,0.75)",
                    highlightFill: "rgba(0,0,255,0.5)",
                    highlightStroke: "rgba(0,0,255,0.5)",
                    data : [{{ product.pricePos }},{{ product.deliveryPos }},{{ product.sizePos }},{{ product.extraPos }}]
                },
                {
                    fillColor : "rgba(255,0,0,0.85)",
                    strokeColor : "rgba(255,0,0,0.75)",
                    highlightFill : "rgba(255,0,0,0.5)",
                    highlightStroke : "rgba(255,0,0,0.5)",
                    data : [{{ product.priceNeg }},{{ product.deliveryNeg }},{{ product.sizeNeg }},{{ product.extraNeg }}]
                }
            ]

        };

        var pricePieChartData = [
            {
                value: {{ product.pricePos}},
                color: "rgba(0,0,255,0.85)",
                highlight: "rgba(0,0,255,0.5)",
                label: "Positive Count"
            },
            {
                value: {{ product.priceNeg }},
                color: "rgba(255,0,0,0.85)",
                highlight: "rgba(255,0,0,0.5)",
                label: "Negative Count"
            }];

        var deliveryPieChartData = [
            {
                value: {{ product.deliveryPos }},
                color: "rgba(0,0,255,0.85)",
                highlight: "rgba(0,0,255,0.5)",
                label: "Positive Count"
            },
            {
                value: {{ product.deliveryNeg }},
                color: "rgba(255,0,0,0.85)",
                highlight: "rgba(255,0,0,0.5)",
                label: "Negative Count"
            }];

        var sizePieChartData = [
            {
                value: {{ product.sizePos }},
                color: "rgba(0,0,255,0.85)",
                highlight: "rgba(0,0,255,0.5)",
                label: "Positive Count"
            },
            {
                value: {{ product.sizeNeg }},
                color: "rgba(255,0,0,0.85)",
                highlight: "rgba(255,0,0,0.5)",
                label: "Negative Count"
            }];

        var extraPieChartData = [
            {
                value: {{ product.extraPos }},
                color: "rgba(0,0,255,0.85)",
                highlight: "rgba(0,0,255,0.5)",
                label: "Positive Count"
            },
            {
                value: {{ product.extraNeg }},
                color: "rgba(255,0,0,0.85)",
                highlight: "rgba(255,0,0,0.5)",
                label: "Negative Count"
            }];


        var chart = null;
        var canvas = null;
        var ctx = null;


        $(document).ready(function() {
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');
            chart = new Chart(ctx).Bar(barChartData);
        });

        function showGraph(id)
        {
            if(id == "barGraph") {
                chart.destroy();
                chart = new Chart(ctx).Bar(barChartData);
            }
            else if(id == "priceGraph"){
                chart.destroy();
                chart = new Chart(ctx).Pie(pricePieChartData);
            }
            else if(id == "deliveryGraph"){
                chart.destroy();
                chart = new Chart(ctx).Pie(deliveryPieChartData);
            }
            else if(id == "sizeGraph"){
                chart.destroy();
                chart = new Chart(ctx).Pie(sizePieChartData);
            }
            else if(id == "extraGraph") {
                chart.destroy();
                chart = new Chart(ctx).Pie(extraPieChartData);
            }
        }
    </script>
</div>
</body>
</html>
